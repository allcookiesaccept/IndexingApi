# Google Indexing API Script

**Скрипт для отправки URL на индексацию через Google Indexing API с использованием множества сервисных аккаунтов**

---

## Возможности

✅ **Параллельная обработка**  
Использует несколько сервисных аккаунтов (JSON-ключи) с многопоточностью для ускорения отправки  
✅ **Умная валидация URL**  
Проверяет статус последней индексации и отправляет повторно только URL старше 14 дней  
✅ **Постоянное хранилище**  
Сохраняет все результаты API-вызовов в PostgreSQL  
✅ **Отчёты**  
Генерирует Excel-файлы с временными метками и статусами  
✅ **Автоматические повторы**  
Переставляет в очередь неудачные запросы 

---

## Настройка

1. **Переменные окружения**  
   Создайте файл `.env` с настройками PostgreSQL:
   ```env
   POSTGRES_HOST=localhost
   POSTGRES_PORT=5432
   POSTGRES_DB=indexing_api
   POSTGRES_USER=admin
   POSTGRES_PASSWORD=secret
   ```
2. **Сервисные аккаунты**  
   Разместите JSON-ключи в папке json_keys.
     
3. **Список URL**  
   Создайте файл urls.csv с URL по одному на строку.
---
## Использование
```bash
python main.py
```
### Результаты:

- report_YYYY-MM-DD.xlsx — отчёт по всем отправкам
- unprocessed_YYYY-MM-DD.csv — необработанные URL
- Таблица api_call_results в БД с историей запросов
